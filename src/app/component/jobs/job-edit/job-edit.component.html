
<h4 class="title">
  Update Job</h4>
  <div class="modal-body">    
  <form [formGroup]="editForm" *ngIf="editForm" class="pt-3">
    <div class="container">
      <div class="row">
        <div class="col-md form-group">
          <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>Job Description</mat-label>
            <input matInput #Description maxlength="256" type="text" placeholder="Description" required formControlName="description">
            <mat-hint align="start"><strong>Enter Job Description</strong> </mat-hint>
            <mat-hint align="end">{{Description.value.length}}/256</mat-hint>
          </mat-form-field>
        </div>
        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Customer</mat-label>
                <mat-select matInput  name="customer" required formControlName="customerId" (change)="changeCustomer($event)">
                    <mat-option *ngFor = "let cust of customers" [value]="cust.id">
                        {{cust.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>


        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Team</mat-label>
                <mat-select required formControlName="teamId" (change)="changeTeam($event)">
                    <mat-option *ngFor="let team of teams" [value]="team.id" >
                        {{team.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>


        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Resource</mat-label>
                <mat-select required formControlName="resourceId" (change)="changeResource($event)">
                    <mat-option *ngFor="let data of resources" [value]="data.id">
                        {{data.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Division</mat-label>
                <mat-select required formControlName="divisionID" (change)="changeDivision($event)">
                    <mat-option *ngFor="let data of divisions" [value]="data.id">
                        {{data.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>
        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Job Asset</mat-label>
                <mat-select required formControlName="jobAssetID" (change)="changeJobAsset($event)">
                    <mat-option *ngFor="let data of assets" [value]="data.id">
                        {{data.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>

        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Job Issue Type</mat-label>
                <mat-select required formControlName="jobIssueTypeID" (change)="changeJobIssueType($event)">
                    <mat-option *ngFor="let data of types" [value]="data.id">
                        {{data.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>
        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Job Priority</mat-label>
                <mat-select required formControlName="jobPriorityID" (change)="changeJobPriority($event)">
                    <mat-option *ngFor="let data of priority" [value]="data.id">
                        {{data.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
      
        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Job Source</mat-label>
                <mat-select required formControlName="jobSourceID" (change)="changeJobSource($event)">
                    <mat-option *ngFor="let data of sources" [value]="data.id">
                        {{data.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>
        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Job Progress Status</mat-label>
                <mat-select required formControlName="jobProgressStatusID" (change)="changeJobProgressStatus($event)">
                    <mat-option *ngFor="let data of progress" [value]="data.id">
                        {{data.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>
        <div class="col-md form-group">
          <mat-form-field class="form-field" appearance="fill">
            <mat-label>Job Type</mat-label>
                <mat-select required formControlName="jobTypeID" (change)="changeJobType($event)">
                    <mat-option *ngFor="let data of jobtypes" [value]="data.id">
                        {{data.name}}
                    </mat-option>
                </mat-select>    
        </mat-form-field>
        </div>
        <div class="col-md form-group">
          <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>External RefNo</mat-label>
            <input matInput placeholder="External RefNo" required formControlName="externalRefNo">
          </mat-form-field>
        </div>       
      </div>
    </div> 
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-3">
          <mat-form-field class="w-100" appearance="fill">
            <mat-label>Start Date</mat-label>
            <input matInput formControlName="dateOpend" readonly required [matDatepicker]="picker">
            <mat-datepicker-toggle matSuffix [for]="picker">
            </mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="col-md-3">
          <mat-form-field class="w-100" appearance="fill">
            <mat-label>Due Date</mat-label>
            <input matInput readonly [matDatepicker]="enddatepicker" required formControlName="dateDue">
            <mat-datepicker-toggle matSuffix [for]="enddatepicker">
            </mat-datepicker-toggle>
            <mat-datepicker #enddatepicker></mat-datepicker>
          </mat-form-field>
        </div>
  
        <div class="col-md-3">
          <mat-form-field class="w-100" appearance="fill">
            <mat-label>Closed Date</mat-label>
            <input matInput formControlName="dateClosed" readonly required [matDatepicker]="dateClosedPicker">
            <mat-datepicker-toggle matSuffix [for]="dateClosedPicker">
            </mat-datepicker-toggle>
            <mat-datepicker #dateClosedPicker></mat-datepicker>
          </mat-form-field>
        </div>

  
</div>


<div class="modal-footer">
  <button type="submit"  class="btn btn-primary mr-2" (click)="editJob()">Update</button>

  <button  class="btn btn btn-danger" (click)="Cancel()">Cancel</button>

</div>